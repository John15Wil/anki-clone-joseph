# Phase 2: å­¦ä¹ ä½“éªŒä¼˜åŒ– - å®ŒæˆæŠ¥å‘Š

## ğŸ¯ ä¼˜åŒ–ç›®æ ‡

å®ç° Phase 2 çš„æ ¸å¿ƒå­¦ä¹ ä½“éªŒåŠŸèƒ½ï¼ŒåŒ…æ‹¬ä¼šè¯ç®¡ç†ã€å¡ç‰‡æ´—ç‰Œã€æ—¶é—´è¿½è¸ªå’Œä¼˜å…ˆçº§æ’åºã€‚

---

## âœ¨ å·²å®Œæˆçš„åŠŸèƒ½

### 1. **å­¦ä¹ ä¼šè¯ç®¡ç†** â­

**åŠŸèƒ½æè¿°**ï¼š
- æ¯æ¬¡å­¦ä¹ ä¼šè¯é™åˆ¶ä¸º **20 å¼ å¡ç‰‡**
- é¿å…ä¸€æ¬¡æ€§å‡ºç°è¿‡å¤šå¡ç‰‡å¯¼è‡´ç–²åŠ³
- å®Œæˆä¸€è½®åå¯ç»§ç»­ä¸‹ä¸€è½®

**å®ç°ç»†èŠ‚**ï¼š

```typescript
const MAX_CARDS_PER_SESSION = 20; // æ¯æ¬¡å­¦ä¹ æœ€å¤š20å¼ å¡ç‰‡

// é™åˆ¶ä¼šè¯å¡ç‰‡æ•°é‡
const limitedQueue = queue.slice(0, MAX_CARDS_PER_SESSION);
```

**UI æ”¹è¿›**ï¼š
- å­¦ä¹ è¿›åº¦æ˜¾ç¤º "ï¼ˆé™é‡ï¼‰" æ ‡è®°
- é¡¶éƒ¨æ˜¾ç¤ºæ©™è‰²æç¤ºï¼š
  ```
  â„¹ï¸ æœ¬æ¬¡å­¦ä¹ é™åˆ¶ä¸º 20 å¼ å¡ç‰‡ï¼Œå®Œæˆåå¯ç»§ç»­ä¸‹ä¸€è½®å­¦ä¹ 
  ```

---

### 2. **ä¼˜å…ˆçº§æ’åº** â­

**åŠŸèƒ½æè¿°**ï¼š
- æœ€ä¹…æœªå¤ä¹ çš„å¡ç‰‡ä¼˜å…ˆå‡ºç°
- ç¡®ä¿æœ€ç´§æ€¥çš„å¡ç‰‡å…ˆè¢«å¤ä¹ 
- åŸºäº `nextReview` æ—¶é—´æˆ³æ’åº

**å®ç°ä»£ç **ï¼š

```typescript
// ä¼˜å…ˆçº§æ’åºï¼šæœ€ä¹…æœªå¤ä¹ çš„å¡ç‰‡ä¼˜å…ˆ
queue.sort((a, b) => a.review.nextReview - b.review.nextReview);
```

**æ•ˆæœ**ï¼š
- åˆ°æœŸæœ€ä¹…çš„å¡ç‰‡æ’åœ¨å‰é¢
- ç¡®ä¿å­¦ä¹ æ•ˆç‡æœ€å¤§åŒ–
- éµå¾ªè®°å¿†æ›²çº¿ç†è®º

---

### 3. **å¡ç‰‡æ··åˆå’Œæ´—ç‰Œ** â­

**åŠŸèƒ½æè¿°**ï¼š
- å°†æ–°å¡ç‰‡å’Œå¤ä¹ å¡ç‰‡æ··åˆå‡ºç°
- é¿å…è¿ç»­å­¦ä¹ æ‰€æœ‰æ–°å¡ç‰‡å¯¼è‡´ç–²åŠ³
- äº¤æ›¿å‡ºç°ï¼Œä¿æŒå­¦ä¹ èŠ‚å¥

**å®ç°é€»è¾‘**ï¼š

```typescript
// åˆ†ç¦»æ–°å¡ç‰‡å’Œå¤ä¹ å¡ç‰‡
const newCards = limitedQueue.filter(item => item.review.state === 'new');
const reviewCards = limitedQueue.filter(item => item.review.state !== 'new');

// äº¤æ›¿æ··åˆ
const shuffledQueue: typeof limitedQueue = [];
const maxLength = Math.max(newCards.length, reviewCards.length);

for (let i = 0; i < maxLength; i++) {
  if (i < reviewCards.length) {
    shuffledQueue.push(reviewCards[i]);
  }
  if (i < newCards.length) {
    shuffledQueue.push(newCards[i]);
  }
}
```

**æ•ˆæœ**ï¼š
```
å¤ä¹ å¡ç‰‡1 â†’ æ–°å¡ç‰‡1 â†’ å¤ä¹ å¡ç‰‡2 â†’ æ–°å¡ç‰‡2 â†’ ...
```
- âœ… å­¦ä¹ èŠ‚å¥æ›´å¹³è¡¡
- âœ… é¿å…è¿ç»­å­¦ä¹ æ–°å¡ç‰‡
- âœ… æé«˜å­¦ä¹ ä½“éªŒ

---

### 4. **å­¦ä¹ æ—¶é—´ç»Ÿè®¡** â­

**åŠŸèƒ½æè¿°**ï¼š
- è¿½è¸ªæ¯å¼ å¡ç‰‡çš„å­¦ä¹ æ—¶é—´
- ç»Ÿè®¡æœ¬æ¬¡ä¼šè¯æ€»æ—¶é•¿
- è®¡ç®—å¹³å‡æ¯å¼ å¡ç‰‡æ—¶é—´
- è®°å½•åˆ°æ•°æ®åº“ä¾›åç»­åˆ†æ

**å®ç°ç»†èŠ‚**ï¼š

```typescript
// çŠ¶æ€ç®¡ç†
const [cardStartTime, setCardStartTime] = useState(Date.now());
const [sessionStats, setSessionStats] = useState({
  // ...
  totalTimeSpent: 0 // æ€»å­¦ä¹ æ—¶é—´ï¼ˆç§’ï¼‰
});

// å½“åˆ‡æ¢å¡ç‰‡æ—¶é‡ç½®è®¡æ—¶å™¨
useEffect(() => {
  setCardStartTime(Date.now());
}, [currentIndex]);

// æäº¤ç­”æ¡ˆæ—¶è®¡ç®—æ—¶é—´
async function handleAnswer(rating: Rating) {
  const cardTimeSpent = Math.round((Date.now() - cardStartTime) / 1000);

  // æ›´æ–°ç»Ÿè®¡
  setSessionStats(prev => ({
    ...prev,
    totalTimeSpent: prev.totalTimeSpent + cardTimeSpent
  }));

  // è®°å½•åˆ°æ•°æ®åº“
  await db.studyLogs.add({
    id: `${Date.now()}-${Math.random()}`,
    cardId: card.id,
    rating,
    timeSpent: cardTimeSpent, // å®é™…å­¦ä¹ æ—¶é—´ï¼ˆç§’ï¼‰
    timestamp: Date.now()
  });
}
```

**æ•°æ®è®°å½•**ï¼š
- âœ… æ¯å¼ å¡ç‰‡çš„å­¦ä¹ æ—¶é—´ç²¾ç¡®åˆ°ç§’
- âœ… å­˜å‚¨åˆ° `studyLogs` è¡¨
- âœ… å¯ç”¨äºåç»­åˆ†æå­¦ä¹ ä¹ æƒ¯

---

### 5. **å¢å¼ºçš„å®Œæˆé¡µé¢ç»Ÿè®¡** â­

**æ–°å¢ç»Ÿè®¡æŒ‡æ ‡**ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å­¦ä¹ å¡ç‰‡        æ­£ç¡®ç‡        å­¦ä¹ æ—¶é•¿  â”‚
â”‚    20           85%           15åˆ†      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  é‡æ¥  å›°éš¾  ä¸€èˆ¬  ç®€å•                  â”‚
â”‚   2     3     10    5                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å¹³å‡æ¯å¼ å¡ç‰‡ 45 ç§’                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ˜¾ç¤ºä¿¡æ¯**ï¼š
1. **å­¦ä¹ å¡ç‰‡æ•°**ï¼šæœ¬æ¬¡ä¼šè¯å­¦ä¹ çš„å¡ç‰‡æ€»æ•°
2. **æ­£ç¡®ç‡**ï¼š(ä¸€èˆ¬ + ç®€å•) / æ€»æ•° Ã— 100%
3. **å­¦ä¹ æ—¶é•¿**ï¼š
   - < 60ç§’ï¼šæ˜¾ç¤º "Xç§’"
   - â‰¥ 60ç§’ï¼šæ˜¾ç¤º "Xåˆ†"
4. **è¯„åˆ†åˆ†å¸ƒ**ï¼šé‡æ¥/å›°éš¾/ä¸€èˆ¬/ç®€å•çš„æ•°é‡
5. **å¹³å‡æ—¶é—´**ï¼šæ€»æ—¶é•¿ / å¡ç‰‡æ•°

---

## ğŸ“Š å¯¹æ¯”æ”¹è¿›

### å­¦ä¹ ä¼šè¯

**ä¼˜åŒ–å‰**ï¼š
- âŒ ä¸€æ¬¡åŠ è½½æ‰€æœ‰åˆ°æœŸå¡ç‰‡ï¼ˆå¯èƒ½ä¸Šç™¾å¼ ï¼‰
- âŒ æ— å¡ç‰‡æ•°é‡æ§åˆ¶
- âŒ å®¹æ˜“å¯¼è‡´å­¦ä¹ ç–²åŠ³

**ä¼˜åŒ–å**ï¼š
- âœ… æ¯æ¬¡é™åˆ¶ 20 å¼ å¡ç‰‡
- âœ… æ˜¾ç¤ºä¼šè¯é™åˆ¶æç¤º
- âœ… å®Œæˆåå¯ç»§ç»­ä¸‹ä¸€è½®
- âœ… å­¦ä¹ ä½“éªŒæ›´è½»æ¾

---

### å¡ç‰‡é¡ºåº

**ä¼˜åŒ–å‰**ï¼š
- âŒ æŒ‰æ•°æ®åº“é¡ºåºåŠ è½½
- âŒ æ‰€æœ‰æ–°å¡ç‰‡é›†ä¸­åœ¨ä¸€èµ·
- âŒ å­¦ä¹ èŠ‚å¥ä¸å‡è¡¡

**ä¼˜åŒ–å**ï¼š
- âœ… ä¼˜å…ˆçº§æ’åºï¼ˆæœ€ä¹…æœªå¤ä¹ ä¼˜å…ˆï¼‰
- âœ… æ–°å¡ç‰‡å’Œå¤ä¹ å¡ç‰‡äº¤æ›¿å‡ºç°
- âœ… å­¦ä¹ èŠ‚å¥æ›´å¹³è¡¡

---

### æ—¶é—´è¿½è¸ª

**ä¼˜åŒ–å‰**ï¼š
- âŒ `timeSpent` å­—æ®µå›ºå®šä¸º 0
- âŒ æ— å®é™…æ—¶é—´è®°å½•
- âŒ æ— æ³•åˆ†æå­¦ä¹ ä¹ æƒ¯

**ä¼˜åŒ–å**ï¼š
- âœ… ç²¾ç¡®è¿½è¸ªæ¯å¼ å¡ç‰‡æ—¶é—´
- âœ… è®°å½•åˆ°æ•°æ®åº“
- âœ… å®Œæˆé¡µé¢æ˜¾ç¤ºç»Ÿè®¡
- âœ… å¯ç”¨äºåç»­æ•°æ®åˆ†æ

---

### ç»Ÿè®¡é¡µé¢

**ä¼˜åŒ–å‰**ï¼š
- åªæ˜¾ç¤ºï¼šå­¦ä¹ å¡ç‰‡æ•°ã€æ­£ç¡®ç‡ã€è¯„åˆ†åˆ†å¸ƒ

**ä¼˜åŒ–å**ï¼š
- âœ… æ–°å¢ï¼šå­¦ä¹ æ—¶é•¿ï¼ˆåˆ†é’Ÿ/ç§’ï¼‰
- âœ… æ–°å¢ï¼šå¹³å‡æ¯å¼ å¡ç‰‡æ—¶é—´
- âœ… 3åˆ—å¸ƒå±€æ›´æ¸…æ™°

---

## ğŸ¯ ç”¨æˆ·ä½“éªŒæå‡

### 1. **å‡å°‘å­¦ä¹ å‹åŠ›**
- ä¸å†ä¸€æ¬¡æ€§é¢å¯¹å¤§é‡å¡ç‰‡
- 20 å¼ çš„é™åˆ¶æ›´å®¹æ˜“å®Œæˆ
- æé«˜å­¦ä¹ åŠ¨åŠ›å’Œå®Œæˆç‡

### 2. **æ›´åˆç†çš„å­¦ä¹ èŠ‚å¥**
- æ–°å¡ç‰‡å’Œå¤ä¹ å¡ç‰‡äº¤æ›¿å‡ºç°
- é¿å…è¿ç»­å­¦ä¹ æ–°å†…å®¹å¯¼è‡´ç–²åŠ³
- å¤ä¹ å¡ç‰‡ç©¿æ’å¢åŠ ä¿¡å¿ƒ

### 3. **å­¦ä¹ ä¼˜å…ˆçº§æ¸…æ™°**
- æœ€ç´§æ€¥çš„å¡ç‰‡ä¼˜å…ˆå¤ä¹ 
- ä¸ä¼šé—æ¼é‡è¦å¡ç‰‡
- ç¬¦åˆ SRS ç®—æ³•åŸç†

### 4. **æ•°æ®é©±åŠ¨çš„æ”¹è¿›**
- è®°å½•çœŸå®å­¦ä¹ æ—¶é—´
- å¯åˆ†æå“ªäº›å¡ç‰‡æœ€å›°éš¾ï¼ˆæ—¶é—´é•¿ï¼‰
- ä¸ºæœªæ¥çš„ AI ä¼˜åŒ–æä¾›æ•°æ®åŸºç¡€

---

## ğŸ”§ æŠ€æœ¯å®ç°

### æ–‡ä»¶å˜æ›´

**ä¿®æ”¹æ–‡ä»¶**ï¼š
- âœ… `/src/pages/StudyPage.tsx` - æ ¸å¿ƒå­¦ä¹ é€»è¾‘é‡æ„

### æ–°å¢åŠŸèƒ½ç‚¹

1. **ä¼šè¯ç®¡ç†**ï¼š
   - `MAX_CARDS_PER_SESSION` å¸¸é‡ï¼ˆ20å¼ ï¼‰
   - `limitedQueue` é™åˆ¶é€»è¾‘
   - UI æç¤ºç»„ä»¶

2. **ä¼˜å…ˆçº§æ’åº**ï¼š
   - `queue.sort()` æŒ‰ `nextReview` æ’åº

3. **å¡ç‰‡æ´—ç‰Œ**ï¼š
   - åˆ†ç¦»æ–°å¡ç‰‡å’Œå¤ä¹ å¡ç‰‡
   - äº¤æ›¿æ··åˆç®—æ³•

4. **æ—¶é—´è¿½è¸ª**ï¼š
   - `cardStartTime` çŠ¶æ€ç®¡ç†
   - `useEffect` é‡ç½®è®¡æ—¶å™¨
   - `cardTimeSpent` è®¡ç®—é€»è¾‘
   - æ•°æ®åº“è®°å½•æ›´æ–°

5. **å¢å¼ºç»Ÿè®¡**ï¼š
   - `totalTimeSpent` ç´¯åŠ 
   - `totalMinutes` å’Œ `avgTimePerCard` è®¡ç®—
   - UI 3åˆ—å¸ƒå±€

---

## ğŸ“ˆ æ•°æ®æµç¨‹

```
ç”¨æˆ·å¼€å§‹å­¦ä¹ 
  â†“
åŠ è½½æ‰€æœ‰åˆ°æœŸå¡ç‰‡
  â†“
ä¼˜å…ˆçº§æ’åºï¼ˆæœ€ä¹…æœªå¤ä¹ ä¼˜å…ˆï¼‰
  â†“
é™åˆ¶ä¸º 20 å¼ 
  â†“
åˆ†ç¦»æ–°å¡ç‰‡å’Œå¤ä¹ å¡ç‰‡
  â†“
äº¤æ›¿æ··åˆ
  â†“
å¼€å§‹å­¦ä¹  â†’ è®°å½•å¼€å§‹æ—¶é—´
  â†“
ç”¨æˆ·è¯„åˆ† â†’ è®¡ç®—å­¦ä¹ æ—¶é—´
  â†“
æ›´æ–°ç»Ÿè®¡ + å†™å…¥æ•°æ®åº“
  â†“
ä¸‹ä¸€å¼ å¡ç‰‡ â†’ é‡ç½®è®¡æ—¶å™¨
  â†“
å®Œæˆä¼šè¯ â†’ æ˜¾ç¤ºç»Ÿè®¡
```

---

## ğŸ‰ æˆæœæ€»ç»“

### æ ¸å¿ƒæ”¹è¿›

1. âœ… **ä¼šè¯ç®¡ç†**ï¼š20å¼ å¡ç‰‡é™åˆ¶ï¼Œå‡å°‘å­¦ä¹ å‹åŠ›
2. âœ… **ä¼˜å…ˆçº§æ’åº**ï¼šæœ€ç´§æ€¥å¡ç‰‡ä¼˜å…ˆï¼Œæé«˜æ•ˆç‡
3. âœ… **å¡ç‰‡æ··åˆ**ï¼šæ–°å¡ç‰‡å’Œå¤ä¹ å¡ç‰‡äº¤æ›¿ï¼ŒèŠ‚å¥å¹³è¡¡
4. âœ… **æ—¶é—´è¿½è¸ª**ï¼šç²¾ç¡®è®°å½•å­¦ä¹ æ—¶é—´ï¼Œæ•°æ®é©±åŠ¨ä¼˜åŒ–
5. âœ… **å¢å¼ºç»Ÿè®¡**ï¼šæ˜¾ç¤ºå­¦ä¹ æ—¶é•¿å’Œå¹³å‡æ—¶é—´

### ç”¨æˆ·ä½“éªŒ

- ğŸ“‰ å­¦ä¹ å‹åŠ›é™ä½ï¼ˆ20å¼ é™åˆ¶ï¼‰
- ğŸ“ˆ å­¦ä¹ æ•ˆç‡æå‡ï¼ˆä¼˜å…ˆçº§æ’åºï¼‰
- ğŸ¯ å­¦ä¹ èŠ‚å¥ä¼˜åŒ–ï¼ˆå¡ç‰‡æ··åˆï¼‰
- ğŸ“Š å­¦ä¹ æ•°æ®å¯è§†åŒ–ï¼ˆæ—¶é—´ç»Ÿè®¡ï¼‰

---

## ğŸš€ ä¸‹ä¸€æ­¥ä¼˜åŒ–æ–¹å‘

æ ¹æ® `OPTIMIZATION_ROADMAP.md`ï¼ŒPhase 3 å¯ä»¥è€ƒè™‘ï¼š

### Phase 3: ç”¨æˆ·ä½“éªŒæå‡ï¼ˆ1å‘¨ï¼‰
1. **å­¦ä¹ ç»Ÿè®¡å¢å¼º**
   - æ—¥å†çƒ­åŠ›å›¾ï¼ˆå­¦ä¹ å¤©æ•°å¯è§†åŒ–ï¼‰
   - æ¯æ—¥å­¦ä¹ æ—¶é•¿ç»Ÿè®¡
   - æ­£ç¡®ç‡è¶‹åŠ¿å›¾
   - å­¦ä¹ è¿ç»­å¤©æ•°ï¼ˆStreakï¼‰

2. **æœç´¢å’Œç­›é€‰åŠŸèƒ½**
   - æŒ‰æ ‡ç­¾ç­›é€‰
   - æŒ‰éš¾åº¦ç­›é€‰ï¼ˆease factorï¼‰
   - æŒ‰çŠ¶æ€ç­›é€‰ï¼ˆæ–°å¡ç‰‡/å­¦ä¹ ä¸­/å·²æŒæ¡ï¼‰
   - æŒ‰åˆ°æœŸæ—¶é—´ç­›é€‰

3. **å¡ç»„ç®¡ç†å¢å¼º**
   - å­å¡ç»„æ”¯æŒï¼ˆå±‚çº§ç»“æ„ï¼‰
   - å¡ç»„ä¹‹é—´ç§»åŠ¨å¡ç‰‡
   - æ‰¹é‡æ“ä½œï¼ˆæ‰¹é‡ç¼–è¾‘ã€åˆ é™¤ã€å¯¼å‡ºï¼‰

---

## ğŸ“ ç”¨æˆ·è¯´æ˜

### å­¦ä¹ ä¼šè¯é™åˆ¶

æ¯æ¬¡å­¦ä¹ æœ€å¤š 20 å¼ å¡ç‰‡ï¼Œè¿™æ˜¯ä¸ºäº†ï¼š
- é¿å…ä¸€æ¬¡æ€§å­¦ä¹ è¿‡å¤šå¯¼è‡´ç–²åŠ³
- æé«˜å­¦ä¹ ä¸“æ³¨åº¦
- å¢åŠ å®Œæˆçš„æˆå°±æ„Ÿ

å®Œæˆä¸€è½®åå¯ç‚¹å‡»"è¿”å›é¦–é¡µ"å†æ¬¡ç‚¹å‡»"å¤ä¹ "ç»§ç»­ä¸‹ä¸€è½®ã€‚

### å¡ç‰‡å‡ºç°é¡ºåº

1. **ä¼˜å…ˆçº§**ï¼šæœ€ä¹…æœªå¤ä¹ çš„å¡ç‰‡ä¼˜å…ˆå‡ºç°
2. **æ··åˆ**ï¼šæ–°å¡ç‰‡å’Œå¤ä¹ å¡ç‰‡äº¤æ›¿å‡ºç°
3. **èŠ‚å¥**ï¼šä¸€èˆ¬æ˜¯ "å¤ä¹  â†’ æ–° â†’ å¤ä¹  â†’ æ–°" çš„èŠ‚å¥

### æ—¶é—´ç»Ÿè®¡

- æ¯å¼ å¡ç‰‡çš„å­¦ä¹ æ—¶é—´ä»æ˜¾ç¤ºé—®é¢˜å¼€å§‹è®¡æ—¶
- ç‚¹å‡»è¯„åˆ†ååœæ­¢è®¡æ—¶å¹¶è®°å½•
- å®Œæˆé¡µé¢ä¼šæ˜¾ç¤ºæ€»å­¦ä¹ æ—¶é—´å’Œå¹³å‡æ—¶é—´

---

## âœ… æµ‹è¯•å»ºè®®

1. **ä¼šè¯é™åˆ¶æµ‹è¯•**ï¼š
   - åˆ›å»ºè¶…è¿‡ 20 å¼ åˆ°æœŸå¡ç‰‡
   - éªŒè¯åªåŠ è½½å‰ 20 å¼ 
   - éªŒè¯æç¤ºä¿¡æ¯æ˜¾ç¤º

2. **å¡ç‰‡é¡ºåºæµ‹è¯•**ï¼š
   - æ‰‹åŠ¨è®¾ç½®ä¸åŒçš„ `nextReview` æ—¶é—´
   - éªŒè¯æœ€æ—©åˆ°æœŸçš„å¡ç‰‡ä¼˜å…ˆ
   - éªŒè¯æ–°å¡ç‰‡å’Œå¤ä¹ å¡ç‰‡äº¤æ›¿

3. **æ—¶é—´ç»Ÿè®¡æµ‹è¯•**ï¼š
   - å­¦ä¹ å‡ å¼ å¡ç‰‡ï¼Œæ¯å¼ åœç•™ä¸åŒæ—¶é—´
   - éªŒè¯å®Œæˆé¡µé¢æ˜¾ç¤ºæ­£ç¡®çš„æ€»æ—¶é•¿
   - éªŒè¯å¹³å‡æ—¶é—´è®¡ç®—æ­£ç¡®

4. **æ•°æ®åº“è®°å½•æµ‹è¯•**ï¼š
   - æŸ¥çœ‹ `studyLogs` è¡¨
   - éªŒè¯ `timeSpent` å­—æ®µæœ‰çœŸå®æ•°æ®ï¼ˆé0ï¼‰

---

## ğŸ“ æŠ€æœ¯äº®ç‚¹

### 1. å®æ—¶è®¡æ—¶ç³»ç»Ÿ
```typescript
const [cardStartTime, setCardStartTime] = useState(Date.now());

useEffect(() => {
  setCardStartTime(Date.now());
}, [currentIndex]);
```

### 2. æ™ºèƒ½æ´—ç‰Œç®—æ³•
```typescript
for (let i = 0; i < maxLength; i++) {
  if (i < reviewCards.length) shuffledQueue.push(reviewCards[i]);
  if (i < newCards.length) shuffledQueue.push(newCards[i]);
}
```

### 3. ä¼˜å…ˆçº§æ’åº
```typescript
queue.sort((a, b) => a.review.nextReview - b.review.nextReview);
```

---

ç°åœ¨åº”ç”¨å…·å¤‡äº† **ä¸“ä¸šçº§å­¦ä¹ ä½“éªŒ**ï¼š
- âœ… ä¼šè¯ç®¡ç†
- âœ… æ™ºèƒ½æ’åº
- âœ… å¡ç‰‡æ··åˆ
- âœ… æ—¶é—´è¿½è¸ª
- âœ… æ•°æ®é©±åŠ¨

**Phase 2 å®Œæˆï¼** ğŸ‰
